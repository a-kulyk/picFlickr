"use strict";!function(){function e(e,o,t){e.state("home",{url:"/",templateUrl:"templates/main.html",controller:"MainController",controllerAs:"main"}).state("home.photo",{url:"/photo/:id",templateUrl:"templates/main.html",controller:"MainController",controllerAs:"main"}),t.html5Mode({enabled:!0,requireBase:!1}),t.hashPrefix("!")}angular.module("picFlickr",["ui.router","ngAnimate","ngResource","ui.bootstrap"]).constant("myConfig",{API_KEY:"b2d2abbb64d86c5552a676795a58ae5c",secret:"76778ce756ff9293",base_url:"https://api.flickr.com/services/rest/",google_url:"https://www.googleapis.com/customsearch/v1",zero:0,one:1,three:3,ten:10,perPage:30,google_API_KEY:"AIzaSyA45B20DzHZiNV4wHuIzyq_1FLNYhZo48E",search_engine_id:"007906631053879618604:mgbelpcc874"}).config(e),e.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"]}();
"use strict";!function(){function e(e,n,o,t){function d(d){var a,c,i,l;a=angular.element('<span id="ngClipboardCopyId">'+d+"</span>"),c=o.find("body").eq(t.zero),c.append(e(a)(n)),i=angular.element(document.getElementById("ngClipboardCopyId")),l=document.createRange(),l.selectNode(i[t.zero]),window.getSelection().removeAllRanges(),window.getSelection().addRange(l),document.execCommand("copy"),window.getSelection().removeAllRanges(),a.remove()}return{toClipboard:d}}angular.module("picFlickr").factory("ngClipboard",e),e.$inject=["$compile","$rootScope","$document","myConfig"]}();
"use strict";!function(){function a(a,e,t){function r(r,o){var n={api_key:e.API_KEY,per_page:e.perPage,safe_search:e.one,privacy_filter:e.one,format:"json",nojsoncallback:e.one,text:r||"top rated",sort:"relevance",page:o&&o>e.zero?o:e.one,method:"flickr.photos.search"};return a({method:"GET",url:e.base_url,params:n}).then(function(a){var e=a.data.photos.page,r=a.data.photos.pages;return a.data.pageNav=t.paginate(e,r),a.data})}return{search:r}}angular.module("picFlickr").factory("FlickrService",a),a.$inject=["$http","myConfig","Paginator"]}();
"use strict";!function(){function e(e,a,t){function r(r,n){var o=n?(n-a.one)*a.ten+a.one:a.one,l={q:r,key:a.google_API_KEY,cx:a.search_engine_id,imgSize:"large",fileType:"jpeg",safe:"medium",searchType:"image",start:o};return e({method:"GET",url:a.google_url,params:l}).then(function(e){var r=e.data.queries.request[0];return e.data.currPage=Math.floor(r.startIndex/a.ten)+a.one,e.data.allPages=r.totalResults%a.ten===a.zero?r.totalResults/a.ten:Math.floor(r.totalResults/a.ten)+a.one,e.data.pageNav=t.paginate(e.data.currPage,e.data.allPages),e.data})}return{search:r}}angular.module("picFlickr").factory("GoogleService",e),e.$inject=["$http","myConfig","Paginator"]}();
"use strict";!function(){function o(o,e,n,r,t,c,l,g,h){function a(o,e){return l.log(o),x.photoSearch=o,x.currentIndex=null,x.googleSearching=!1,x.flickrSearching=!1,x.showGallery=!1,x.loading=!0,c.search(o,e).then(function(o){l.log("google_res: ",o),x.googlePhotos=o.items,x.pageNav=o.pageNav,x.page=o.currPage,x.pages=o.allPages,x.googleSearching=!0,x.loading=!1})}function i(o,e){if(l.log(o),x.photoSearch=o,"undefined"==typeof e||x.page!==e)return x.currentIndex=null,x.loading=!0,x.flickrSearching=!1,x.googleSearching=!1,x.showGallery=!1,t.search(o,e).then(function(o){l.log("flickr_res:",o),x.photos=o.photos.photo,x.page=o.photos.page,x.pages=o.photos.pages,x.pageNav=o.pageNav,x.loading=!1,x.flickrSearching=!0})}function u(o){l.log(o),x.currentIndex=o,x.currentPhoto=x.photos[o],x.currentPhotoSrc="https://farm"+x.currentPhoto.farm+".static.flickr.com/"+x.currentPhoto.server+"/"+x.currentPhoto.id+"_"+x.currentPhoto.secret+"_z.jpg",x.showGallery=!0}function s(o){x.currentIndex=o,x.currentPhoto=x.googlePhotos[o],x.currentPhotoSrc=x.googlePhotos[o].link,x.showGallery=!0}function p(){return x.googleSearching?void(x.currentIndex===x.googlePhotos.length-h.one?(x.showGallery=!1,a(x.photoSearch,x.page+h.one).then(function(){s(h.zero)})):s(x.currentIndex+h.one)):void(x.currentIndex===x.photos.length-h.one?(x.showGallery=!1,i(x.photoSearch,x.page+h.one).then(function(){u(h.zero)})):u(x.currentIndex+h.one))}function f(){if(x.googleSearching)if(x.currentIndex===h.zero){if(x.page===h.one)return;x.showGallery=!1,a(x.photoSearch,x.page-h.one).then(function(){s(x.googlePhotos.length-h.one)})}else s(x.currentIndex-h.one);else if(x.currentIndex===h.zero){if(x.page===h.one)return;x.showGallery=!1,i(x.photoSearch,x.page-h.one).then(function(){u(x.photos.length-h.one)})}else u(x.currentIndex-h.one)}function d(){g.toClipboard(x.currentPhotoSrc)}function S(){x.showGallery=!1,x.currentIndex=null}function P(){n()}var x=this;x.search=i,x.googleSearch=a,x.openPhoto=u,x.openGooglePhoto=s,x.next=p,x.previous=f,x.copyLink=d,x.close=S,x.goTop=P,i()}angular.module("picFlickr").controller("MainController",o),o.$inject=["$scope","$location","$anchorScroll","$q","FlickrService","GoogleService","$log","ngClipboard","myConfig"]}();
"use strict";!function(){angular.module("picFlickr").directive("navbar",function(){return{restrict:"E",templateUrl:"templates/navbar.html",replace:!0,scope:{search:"&mySearch",googleSearch:"&myGoogleSearch"}}})}();
"use strict";!function(){function e(e){function t(t,n){var r,u=[];for(t>e.one&&u.push({text:"<< Back",number:t-e.one}),r=e.one;r<=n;r++)r===t?u.push({text:t,number:t,disabled:!0}):r>=t-e.three&&r<=t+e.three&&u.push({text:r,number:r});return t<n&&u.push({text:"Next >>",number:t+e.one}),u}return{paginate:t}}angular.module("picFlickr").factory("Paginator",e),e.$inject=["myConfig"]}();